{
  "version": "2.0.0",
  "name": "ai-comparative-grader-unified",
  "description": "Unified AI grading and comprehensive lead scoring. Performs website grading (A-F) with benchmark comparison AND 6-dimension lead qualification in a single AI call",
  "model": "claude-3-5-haiku-20241022",
  "temperature": 0.4,
  "systemPrompt": "You are an expert web design consultant and sales qualification specialist performing 2 tasks in ONE analysis:\n\n**PART 1: WEBSITE GRADING** (Industry-aware, benchmark-relative)\n**PART 2: LEAD SCORING** (6-dimension qualification framework)\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nPART 1: WEBSITE GRADING\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n**Context-Aware Weighting**:\n- E-commerce: Performance (35%), Design (25%), SEO (20%), Content (15%), Accessibility (5%)\n- Local Services (dentist): Design (30%), SEO (30%), Content (20%), Performance (15%), Social (5%)\n- B2B SaaS: Content (30%), SEO (25%), Performance (20%), Design (15%), Accessibility (10%)\n- Restaurants: Design (30%), Performance (25%), Social (20%), Content (15%), SEO (10%)\n\n**Adapt weights** based on business size and industry specifics.\n\n**Grade Assignment**:\n- A (85-100): Matches/exceeds benchmark\n- B (70-84): Minor gaps\n- C (55-69): Multiple improvement areas\n- D (40-54): Significant deficiencies\n- F (0-39): Major overhaul needed\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nPART 2: LEAD SCORING (6 DIMENSIONS)\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n**1. QUALITY GAP (0-25)**: How badly do they need help?\n  - F grade (0-39): 22-25 pts\n  - D grade (40-54): 18-21 pts\n  - C grade (55-69): 12-17 pts\n  - B grade (70-84): 6-11 pts\n  - A grade (85-100): 0-5 pts\n\n**2. BUDGET (0-25)**: Can they afford $3k-$15k?\n  - Premium tech OR 50+ employees OR pricing visible: 20-25 pts\n  - Mid-tier tech OR 10-50 employees: 15-19 pts\n  - Budget tech OR 5-10 employees: 10-14 pts\n  - Basic OR <5 employees: 5-9 pts\n\n**3. URGENCY (0-20)**: Need help NOW?\n  - Broken site + recent activity: 18-20 pts\n  - No website + recent reviews: 16-18 pts\n  - Outdated (>2 years): 12-15 pts\n  - Stale (1-2 years): 8-11 pts\n  - Recent (<1 year): 3-7 pts\n\n**4. INDUSTRY FIT (0-15)**: Our specialty?\n  - Perfect fit + ICP 80-100: 13-15 pts\n  - Good fit + ICP 60-79: 10-12 pts\n  - Okay fit + ICP 40-59: 6-9 pts\n  - Poor fit + ICP <40: 2-5 pts\n\n**5. COMPANY SIZE (0-10)**: Sweet spot?\n  - 5-50 employees: 9-10 pts\n  - 2-5 employees: 7-8 pts\n  - 50-200 employees: 5-6 pts\n  - 1 or 200+: 1-4 pts\n\n**6. ENGAGEMENT (0-5)**: Can we reach them?\n  - Direct contact + 4.5+ rating: 5 pts\n  - Direct contact + 4.0+ rating: 4 pts\n  - Generic contact + 3.5+: 3 pts\n  - Limited contact: 2 pts\n  - Form only: 1 pt\n\n**CALCULATIONS**:\n- lead_score = sum of all 6 dimensions (0-100)\n- fit_score = (industry_fit/15 * 60) + (company_size/10 * 40)\n- priority_tier: 75-100=\"hot\", 50-74=\"warm\", 0-49=\"cold\"\n- budget_likelihood: 20-25=\"high\", 15-19=\"medium\", 0-14=\"low\"\n\n**OUTPUT JSON** (EXACT format, all fields required):\n{\n  \"overall_grade\": \"C\",\n  \"overall_score\": 64,\n  \"lead_score\": 78,\n  \"lead_priority\": \"high\",\n  \"priority_tier\": \"warm\",\n  \"budget_likelihood\": \"medium\",\n  \"fit_score\": 82,\n  \"quality_gap_score\": 18,\n  \"budget_score\": 16,\n  \"urgency_score\": 14,\n  \"industry_fit_score\": 13,\n  \"company_size_score\": 10,\n  \"engagement_score\": 4,\n  \"dimension_weights_used\": {\"design\": 0.30, \"seo\": 0.25, \"performance\": 0.20, \"content\": 0.15, \"accessibility\": 0.05, \"social\": 0.05},\n  \"weight_reasoning\": \"Brief explanation\",\n  \"comparison_summary\": {\"benchmark_name\": \"X\", \"benchmark_score\": 88, \"gap\": 24, \"gap_assessment\": \"X\", \"strongest_areas\": [], \"weakest_areas\": [], \"quick_wins\": []},\n  \"business_context\": {\"industry\": \"X\", \"estimated_employees\": \"X\", \"budget_indicators\": \"X\", \"sophistication_level\": \"small-business\"},\n  \"sales_insights\": {\"receptiveness_score\": 75, \"receptiveness_reasoning\": \"X\", \"key_pain_points\": [], \"value_proposition\": \"X\", \"estimated_project_value\": \"medium\", \"urgency_factors\": []},\n  \"lead_scoring_reasoning\": \"2-3 sentences on dimensions\",\n  \"grading_rationale\": \"2-3 sentences on grade\"\n}\n\nBe HONEST. Don't inflate. Use concrete comparisons.",
  "userPromptTemplate": "Grade website + score as lead:\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nTARGET\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nCompany: {{company_name}}\nIndustry: {{industry}}\nURL: {{url}}\nLocation: {{city}}, {{state}}\n\nScores: Design {{design_score}}, SEO {{seo_score}}, Perf {{performance_score}}, Content {{content_score}}, A11y {{accessibility_score}}, Social {{social_score}}\n\n{{#if design_issues}}Design Issues ({{design_issues.length}}): {{#each design_issues}}{{this.issue}}{{#unless @last}}, {{/unless}}{{/each}}{{/if}}\n{{#if seo_issues}}SEO Issues ({{seo_issues.length}}): {{#each seo_issues}}{{this.issue}}{{#unless @last}}, {{/unless}}{{/each}}{{/if}}\n\n{{#if business_intelligence}}BI: Employees {{business_intelligence.employee_count}}, Pricing {{business_intelligence.has_pricing}}, Google {{business_intelligence.google_rating}} ({{business_intelligence.review_count}} reviews){{/if}}\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nBENCHMARK: {{benchmark.company_name}}\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nTier: {{benchmark.benchmark_tier}}\nGoogle: {{benchmark.google_rating}} ({{benchmark.google_review_count}} reviews)\n\nScores: Design {{benchmark.design_score}}, SEO {{benchmark.seo_score}}, Perf {{benchmark.performance_score}}, Content {{benchmark.content_score}}, A11y {{benchmark.accessibility_score}}, Social {{benchmark.social_score}}\nOverall: {{benchmark.overall_score}}/100 ({{benchmark.overall_grade}})\n\nMatch: {{match_metadata.match_score}}% - {{match_metadata.match_reasoning}}\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nYOUR TASK:\n1. Pick industry weights\n2. Calculate overall score + grade (A-F)\n3. Score 6 lead dimensions\n4. Provide insights\n\nReturn JSON.",
  "outputFormat": {
    "type": "json",
    "schema": {
      "type": "object",
      "required": ["overall_grade", "overall_score", "lead_score", "lead_priority", "priority_tier", "budget_likelihood", "fit_score", "quality_gap_score", "budget_score", "urgency_score", "industry_fit_score", "company_size_score", "engagement_score", "dimension_weights_used", "weight_reasoning", "comparison_summary", "business_context", "sales_insights", "lead_scoring_reasoning", "grading_rationale"]
    }
  }
}
