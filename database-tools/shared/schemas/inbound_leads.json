{
  "table": "inbound_leads",
  "description": "Stores leads captured from the landing page (report downloads and CTA bookings)",
  "columns": [
    {
      "name": "id",
      "type": "uuid",
      "primaryKey": true,
      "default": "gen_random_uuid()"
    },
    {
      "name": "name",
      "type": "text",
      "notNull": false,
      "comment": "Full name of the lead (nullable for anonymous CTA bookings)"
    },
    {
      "name": "email",
      "type": "text",
      "notNull": false,
      "comment": "Email address (nullable for anonymous CTA bookings)"
    },
    {
      "name": "phone",
      "type": "text",
      "notNull": false,
      "comment": "Phone number (optional)"
    },
    {
      "name": "company",
      "type": "text",
      "notNull": false,
      "comment": "Company name (optional, may be pre-filled from report)"
    },
    {
      "name": "report_id",
      "type": "text",
      "notNull": false,
      "comment": "ID of the report they requested to download (nullable for CTA bookings without report)"
    },
    {
      "name": "source",
      "type": "text",
      "default": "landing_page",
      "notNull": true,
      "comment": "Lead source: landing_page, cta_section, direct_outreach, etc."
    },
    {
      "name": "download_completed",
      "type": "boolean",
      "default": false,
      "notNull": true,
      "comment": "Whether the report download was successfully completed"
    },
    {
      "name": "report_requested",
      "type": "boolean",
      "default": false,
      "notNull": true,
      "comment": "Whether the lead requested the full report to be sent via email"
    },
    {
      "name": "calendly_scheduled",
      "type": "boolean",
      "default": false,
      "notNull": true,
      "comment": "Whether the lead scheduled a consultation via Calendly"
    },
    {
      "name": "calendly_event_id",
      "type": "text",
      "notNull": false,
      "comment": "Calendly event ID (if consultation was scheduled)"
    },
    {
      "name": "consultation_scheduled_at",
      "type": "timestamptz",
      "notNull": false,
      "comment": "When the consultation was scheduled"
    },
    {
      "name": "ip_address",
      "type": "text",
      "notNull": false,
      "comment": "IP address of the lead (for analytics)"
    },
    {
      "name": "user_agent",
      "type": "text",
      "notNull": false,
      "comment": "Browser user agent (for analytics)"
    },
    {
      "name": "metadata",
      "type": "jsonb",
      "notNull": false,
      "comment": "Additional metadata: referrer, UTM params, etc."
    },
    {
      "name": "created_at",
      "type": "timestamptz",
      "default": "NOW()",
      "notNull": true,
      "comment": "When the lead was captured"
    },
    {
      "name": "updated_at",
      "type": "timestamptz",
      "default": "NOW()",
      "notNull": true,
      "comment": "Last updated timestamp"
    }
  ],
  "indexes": [
    {
      "name": "idx_inbound_leads_email",
      "columns": ["email"]
    },
    {
      "name": "idx_inbound_leads_report_id",
      "columns": ["report_id"]
    },
    {
      "name": "idx_inbound_leads_created_at",
      "columns": ["created_at"]
    },
    {
      "name": "idx_inbound_leads_source",
      "columns": ["source"]
    }
  ]
}
